<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D√©rivation - Cours Interactif</title>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=JetBrains+Mono:wght@400;600&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --primary: #FF6B35;
            --secondary: #004E89;
            --accent: #F77F00;
            --bg-light: #F9F7F4;
            --bg-dark: #1A1A2E;
            --text-dark: #2D3142;
            --text-light: #F9F7F4;
            --success: #06D6A0;
            --warning: #FFD23F;
            --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.08);
            --shadow-md: 0 8px 24px rgba(0,0,0,0.12);
            --shadow-lg: 0 16px 48px rgba(0,0,0,0.16);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.7;
            overflow-x: hidden;
        }

        /* Header avec animation */
        .hero {
            background: var(--gradient-1);
            color: white;
            padding: 4rem 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><defs><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse"><path d="M 40 0 L 0 0 0 40" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.3;
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(40px, 40px); }
        }

        .hero h1 {
            font-family: 'Syne', sans-serif;
            font-size: clamp(2.5rem, 8vw, 5rem);
            font-weight: 800;
            margin-bottom: 1rem;
            position: relative;
            animation: fadeInDown 0.8s ease-out;
        }

        .hero .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Navigation fixe */
        .nav-progress {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .nav-progress-bar {
            height: 100%;
            background: var(--gradient-2);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Conteneur principal */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Navigation des chapitres */
        .chapter-nav {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 3rem 0;
        }

        .chapter-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow-md);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 3px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .chapter-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: var(--gradient-3);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }

        .chapter-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-lg);
            border-color: var(--primary);
        }

        .chapter-card:hover::before {
            transform: scaleX(1);
        }

        .chapter-number {
            font-family: 'Syne', sans-serif;
            font-size: 3rem;
            font-weight: 800;
            background: var(--gradient-2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .chapter-title {
            font-family: 'Syne', sans-serif;
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .chapter-desc {
            color: #666;
            font-size: 0.95rem;
        }

        /* Sections de contenu */
        .section {
            background: white;
            border-radius: 20px;
            padding: 3rem;
            margin: 2rem 0;
            box-shadow: var(--shadow-md);
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section h2 {
            font-family: 'Syne', sans-serif;
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--secondary);
            margin-bottom: 1.5rem;
            position: relative;
            display: inline-block;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-2);
            border-radius: 2px;
        }

        .section h3 {
            font-family: 'Syne', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin: 2rem 0 1rem;
        }

        /* Bo√Ætes d'information */
        .info-box {
            background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
            border-left: 5px solid var(--secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            position: relative;
            overflow: hidden;
        }

        .info-box::before {
            content: 'üí°';
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 2rem;
            opacity: 0.3;
        }

        .definition-box {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-left: 5px solid var(--accent);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            position: relative;
        }

        .definition-box::before {
            content: 'üìö';
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 2rem;
            opacity: 0.3;
        }

        .formula-box {
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
            border: 3px solid var(--secondary);
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.4rem;
            font-weight: 600;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .formula-box::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(10%, 10%); }
        }

        /* Calculateur interactif */
        .calculator {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            color: white;
            box-shadow: var(--shadow-lg);
        }

        .calculator h3 {
            color: white;
            margin-bottom: 1.5rem;
        }

        .calc-inputs {
            display: grid;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .input-group label {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .input-group input {
            padding: 1rem;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-family: 'JetBrains Mono', monospace;
            background: rgba(255,255,255,0.9);
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            background: white;
            box-shadow: 0 0 0 3px rgba(255,255,255,0.3);
        }

        .calc-button {
            background: var(--accent);
            color: white;
            border: none;
            padding: 1.2rem 2rem;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            font-family: 'Syne', sans-serif;
        }

        .calc-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .calc-button:active {
            transform: translateY(0);
        }

        .calc-result {
            background: rgba(255,255,255,0.15);
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            min-height: 60px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            backdrop-filter: blur(10px);
        }

        /* Table de valeurs */
        .value-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 2rem 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .value-table thead {
            background: var(--gradient-1);
            color: white;
        }

        .value-table th {
            padding: 1.2rem;
            font-family: 'Syne', sans-serif;
            font-weight: 700;
            text-align: center;
        }

        .value-table td {
            padding: 1rem;
            text-align: center;
            border-bottom: 1px solid #eee;
            font-family: 'JetBrains Mono', monospace;
            background: white;
        }

        .value-table tr:nth-child(even) td {
            background: #f8f9fa;
        }

        .value-table tr:hover td {
            background: #e3f2fd;
        }

        /* Graphique interactif */
        .graph-container {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: var(--shadow-md);
        }

        canvas {
            max-width: 100%;
            border-radius: 12px;
            cursor: crosshair;
        }

        /* Boutons d'action */
        .action-buttons {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            font-family: 'Syne', sans-serif;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: var(--gradient-2);
            color: white;
        }

        .btn-secondary {
            background: var(--secondary);
            color: white;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        /* Quiz interactif */
        .quiz-container {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            color: white;
        }

        .quiz-question {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .quiz-options {
            display: grid;
            gap: 1rem;
        }

        .quiz-option {
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 12px;
            padding: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .quiz-option:hover {
            background: rgba(255,255,255,0.3);
            transform: translateX(10px);
        }

        .quiz-option.correct {
            background: var(--success);
            border-color: var(--success);
        }

        .quiz-option.incorrect {
            background: #e53935;
            border-color: #e53935;
        }

        /* Conseils */
        .tip {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border-left: 5px solid var(--warning);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            color: var(--text-dark);
            position: relative;
        }

        .tip::before {
            content: 'üí° ASTUCE';
            display: block;
            font-weight: 700;
            font-family: 'Syne', sans-serif;
            margin-bottom: 0.5rem;
            color: #d63031;
        }

        /* Navigation entre sections */
        .section-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 2px solid #eee;
        }

        /* Animations au scroll */
        .fade-in-section {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Mode sombre toggle */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            transform: rotate(180deg) scale(1.1);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .section {
                padding: 1.5rem;
            }

            .chapter-nav {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }
        }

        /* Loader */
        .loader {
            display: none;
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Code blocks */
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 1.5rem;
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            overflow-x: auto;
            margin: 1.5rem 0;
            box-shadow: var(--shadow-md);
        }

        /* Highlighting */
        .highlight {
            background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: 600;
        }

        /* Graphique Canvas */
        .graph-canvas {
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            margin: 2rem 0;
            padding: 1rem;
        }

        canvas {
            border-radius: 8px;
            max-width: 100%;
            cursor: crosshair;
        }

        /* Contr√¥les du graphique */
        .graph-controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 1rem;
            padding: 1rem;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 12px;
        }

        .graph-controls button {
            flex: 1;
            min-width: 150px;
        }

        /* Simulateur de tangente */
        .tangent-simulator {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            color: white;
        }

        .slider-container {
            margin: 1.5rem 0;
        }

        .slider-container label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.3);
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .slider::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--accent);
            cursor: pointer;
            border: none;
        }

        .slider-value {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-family: 'JetBrains Mono', monospace;
            margin-top: 0.5rem;
        }

        /* Timeline de progression */
        .progress-timeline {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: var(--shadow-md);
        }

        .timeline-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin: 2rem 0;
        }

        .timeline-steps::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 4px;
            background: #e0e0e0;
            z-index: 0;
        }

        .timeline-progress {
            position: absolute;
            top: 20px;
            left: 0;
            height: 4px;
            background: var(--gradient-2);
            z-index: 1;
            transition: width 0.5s ease;
        }

        .timeline-step {
            position: relative;
            z-index: 2;
            text-align: center;
            flex: 1;
        }

        .timeline-dot {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            border: 4px solid #e0e0e0;
            margin: 0 auto 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            transition: all 0.3s ease;
        }

        .timeline-step.completed .timeline-dot {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .timeline-step.active .timeline-dot {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
            transform: scale(1.2);
            box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.2);
        }

        .timeline-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: #666;
        }

        .timeline-step.active .timeline-label {
            color: var(--primary);
        }

        /* Section formules */
        .formulas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .formula-card {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            border-top: 4px solid var(--primary);
            transition: all 0.3s ease;
        }

        .formula-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .formula-card h4 {
            font-family: 'Syne', sans-serif;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .formula-card .formula {
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.2rem;
            background: rgba(102, 126, 234, 0.1);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            margin: 1rem 0;
        }

        /* Exercices pratiques */
        .practice-exercise {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            color: white;
        }

        .exercise-input {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 1rem;
            border-radius: 10px;
            font-size: 1.1rem;
            font-family: 'JetBrains Mono', monospace;
            width: 100%;
            margin: 1rem 0;
        }

        .exercise-feedback {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 1rem;
            min-height: 50px;
            backdrop-filter: blur(10px);
        }

        /* Score et statistiques */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-number {
            font-family: 'Syne', sans-serif;
            font-size: 3rem;
            font-weight: 800;
            background: var(--gradient-2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
            font-weight: 600;
            margin-top: 0.5rem;
        }

        /* Mode plein √©cran */
        .fullscreen-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 999;
            background: var(--gradient-2);
            color: white;
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .fullscreen-btn:hover {
            transform: scale(1.1);
        }

        /* Notes et annotations */
        .note-taking {
            background: #fff9e6;
            border-radius: 16px;
            padding: 1.5rem;
            margin: 2rem 0;
            border-left: 5px solid var(--warning);
        }

        .note-taking textarea {
            width: 100%;
            min-height: 150px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 1rem;
            font-family: 'DM Sans', sans-serif;
            font-size: 1rem;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .note-taking textarea:focus {
            outline: none;
            border-color: var(--warning);
        }

        /* Tooltips */
        .tooltip {
            position: relative;
            display: inline-block;
            border-bottom: 2px dotted var(--primary);
            cursor: help;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 250px;
            background: var(--text-dark);
            color: white;
            text-align: center;
            border-radius: 8px;
            padding: 0.75rem;
            position: absolute;
            z-index: 100;
            bottom: 125%;
            left: 50%;
            margin-left: -125px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.85rem;
            box-shadow: var(--shadow-lg);
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Accord√©on pour exemples */
        .accordion {
            background: white;
            border-radius: 12px;
            margin: 1rem 0;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .accordion-header {
            background: var(--gradient-3);
            color: white;
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 700;
            transition: all 0.3s ease;
        }

        .accordion-header:hover {
            background: linear-gradient(135deg, #3f9cfe 0%, #00d2fe 100%);
        }

        .accordion-icon {
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .accordion.active .accordion-icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: white;
        }

        .accordion.active .accordion-content {
            max-height: 1000px;
        }

        .accordion-body {
            padding: 1.5rem;
        }

        /* Cartes de r√©vision */
        .flashcard {
            perspective: 1000px;
            height: 300px;
            margin: 2rem 0;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
        }

        .flashcard-front {
            background: var(--gradient-1);
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .flashcard-back {
            background: var(--gradient-2);
            color: white;
            transform: rotateY(180deg);
            font-size: 1.2rem;
        }

        /* Badges de r√©ussite */
        .achievement-badges {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        .badge {
            background: white;
            border-radius: 12px;
            padding: 1rem 1.5rem;
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: all 0.3s ease;
        }

        .badge:hover {
            transform: translateY(-3px);
        }

        .badge-icon {
            font-size: 2rem;
        }

        .badge.locked {
            opacity: 0.4;
            filter: grayscale(100%);
        }

        .badge.unlocked {
            animation: unlockBadge 0.5s ease-out;
        }

        @keyframes unlockBadge {
            0% { transform: scale(0) rotate(-180deg); }
            50% { transform: scale(1.2) rotate(10deg); }
            100% { transform: scale(1) rotate(0); }
        }

        /* Chronom√®tre */
        .timer-display {
            background: var(--gradient-1);
            color: white;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 2rem;
            text-align: center;
            margin: 1rem 0;
            box-shadow: var(--shadow-md);
        }

        /* Comparaison c√¥te √† c√¥te */
        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .comparison-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: var(--shadow-md);
        }

        .comparison-card.highlight-left {
            border-left: 5px solid var(--success);
        }

        .comparison-card.highlight-right {
            border-left: 5px solid var(--primary);
        }

        /* Animations de particules */
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--accent);
            border-radius: 50%;
            opacity: 0.3;
            animation: float 3s ease-in-out infinite;
        }

        /* Responsive am√©lior√© */
        @media (max-width: 768px) {
            .comparison-container {
                grid-template-columns: 1fr;
            }

            .stats-container {
                grid-template-columns: 1fr 1fr;
            }

            .formulas-grid {
                grid-template-columns: 1fr;
            }

            .timeline-steps {
                flex-direction: column;
                gap: 1rem;
            }

            .timeline-steps::before {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Barre de progression -->
    <div class="nav-progress">
        <div class="nav-progress-bar" id="progressBar"></div>
    </div>

    <!-- Toggle th√®me -->
    <button class="theme-toggle" id="themeToggle" title="Changer de th√®me">üåô</button>

    <!-- Bouton plein √©cran -->
    <button class="fullscreen-btn" id="fullscreenBtn" title="Mode plein √©cran">‚õ∂</button>

    <!-- Hero Section -->
    <header class="hero">
        <h1>D√âRIVATION</h1>
        <p class="subtitle">Partie 1 : Les fondamentaux - Cours interactif 1STI2D</p>
    </header>

    <!-- Conteneur principal -->
    <div class="container">
        
        <!-- Navigation des chapitres -->
        <div class="chapter-nav">
            <div class="chapter-card" onclick="showSection('section1')">
                <div class="chapter-number">I</div>
                <h3 class="chapter-title">Limite en z√©ro</h3>
                <p class="chapter-desc">D√©couvrir le concept de limite et son importance</p>
            </div>
            <div class="chapter-card" onclick="showSection('section2')">
                <div class="chapter-number">II</div>
                <h3 class="chapter-title">Nombre d√©riv√©</h3>
                <p class="chapter-desc">Calculer et comprendre le nombre d√©riv√©</p>
            </div>
            <div class="chapter-card" onclick="showSection('section3')">
                <div class="chapter-number">III</div>
                <h3 class="chapter-title">Tangente</h3>
                <p class="chapter-desc">Tracer et d√©terminer l'√©quation d'une tangente</p>
            </div>
            <div class="chapter-card" onclick="showSection('section4')">
                <div class="chapter-number">üéØ</div>
                <h3 class="chapter-title">Exercices</h3>
                <p class="chapter-desc">Mettre en pratique vos connaissances</p>
            </div>
        </div>

        <!-- Timeline de progression -->
        <div class="progress-timeline">
            <h3 style="text-align: center; font-family: 'Syne', sans-serif; color: var(--secondary); margin-bottom: 2rem;">
                üìä Votre progression
            </h3>
            <div class="timeline-steps">
                <div class="timeline-progress" id="timelineProgress" style="width: 0%;"></div>
                <div class="timeline-step active" id="step1">
                    <div class="timeline-dot">1</div>
                    <div class="timeline-label">Limite</div>
                </div>
                <div class="timeline-step" id="step2">
                    <div class="timeline-dot">2</div>
                    <div class="timeline-label">D√©riv√©e</div>
                </div>
                <div class="timeline-step" id="step3">
                    <div class="timeline-dot">3</div>
                    <div class="timeline-label">Tangente</div>
                </div>
                <div class="timeline-step" id="step4">
                    <div class="timeline-dot">‚úì</div>
                    <div class="timeline-label">Exercices</div>
                </div>
            </div>
        </div>

        <!-- Statistiques -->
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-number" id="statTime">0</div>
                <div class="stat-label">Minutes pass√©es</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="statQuizzes">0</div>
                <div class="stat-label">Quiz r√©ussis</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="statCalculations">0</div>
                <div class="stat-label">Calculs effectu√©s</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="statScore">0%</div>
                <div class="stat-label">Score global</div>
            </div>
        </div>

        <!-- Section 1 : Limite en z√©ro -->
        <section class="section active" id="section1">
            <h2>I. Limite en z√©ro d'une fonction</h2>
            
            <div class="info-box">
                <strong>Pourquoi √©tudier les limites ?</strong><br>
                Les limites permettent d'√©tudier le comportement d'une fonction autour d'une valeur, m√™me quand la fonction n'est pas d√©finie en ce point !
            </div>

            <h3>üìä Exemple 1 : Exploration interactive</h3>
            
            <p>Soit la fonction <strong>f</strong> d√©finie sur ]-‚àû ; 0[ ‚à™ ]0 ; +‚àû[ par :</p>
            
            <div class="formula-box">
                f(x) = ((x+1)¬≤ - 1) / x
            </div>

            <p>L'image de 0 par la fonction f n'existe pas. Observons ce qui se passe quand x se rapproche de 0 :</p>

            <table class="value-table">
                <thead>
                    <tr>
                        <th>x</th>
                        <th>-0,5</th>
                        <th>-0,1</th>
                        <th>-0,01</th>
                        <th>-0,001</th>
                        <th style="background: var(--accent);">‚Üí 0 ‚Üê</th>
                        <th>0,001</th>
                        <th>0,01</th>
                        <th>0,1</th>
                        <th>0,5</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>f(x)</strong></td>
                        <td>1,5</td>
                        <td>1,9</td>
                        <td>1,99</td>
                        <td>1,999</td>
                        <td style="background: var(--accent); color: white; font-weight: bold;">?</td>
                        <td>2,001</td>
                        <td>2,01</td>
                        <td>2,1</td>
                        <td>2,5</td>
                    </tr>
                </tbody>
            </table>

            <div class="tip">
                Regardez bien : que se passe-t-il avec les valeurs de f(x) quand x s'approche de 0 ?
                Elles se rapprochent toutes de <span class="highlight">2</span> !
            </div>

            <div class="definition-box">
                <strong>üí´ D√©finition - Limite</strong><br><br>
                On dit que <strong>la limite de f lorsque x tend vers 0 est √©gale √† 2</strong><br>
                On note : <strong>lim<sub>x‚Üí0</sub> f(x) = 2</strong>
            </div>

            <!-- Calculateur de limite -->
            <div class="calculator">
                <h3>üßÆ Calculateur de valeurs de f(x)</h3>
                <div class="calc-inputs">
                    <div class="input-group">
                        <label for="xValue">Entrez une valeur de x (diff√©rente de 0) :</label>
                        <input type="number" id="xValue" step="0.001" value="0.1" placeholder="Ex: 0.1">
                    </div>
                </div>
                <button class="calc-button" onclick="calculateLimit()">Calculer f(x)</button>
                <div class="calc-result" id="limitResult">
                    Entrez une valeur pour voir le r√©sultat...
                </div>
            </div>

            <h3>üìà Graphique interactif de la fonction</h3>
            <div class="graph-canvas">
                <canvas id="limitGraph" width="600" height="400"></canvas>
                <div class="graph-controls">
                    <button class="btn btn-primary" onclick="drawLimitGraph()">üîÑ Actualiser le graphique</button>
                    <button class="btn btn-secondary" onclick="animateLimitApproach()">‚ñ∂Ô∏è Animer l'approche de la limite</button>
                </div>
            </div>

            <div class="tip">
                üéØ Utilisez le graphique pour visualiser comment la fonction se comporte pr√®s de x = 0 !
            </div>

            <!-- Cartes de r√©vision -->
            <h3>üé¥ Carte de r√©vision</h3>
            <div class="flashcard" onclick="this.classList.toggle('flipped')">
                <div class="flashcard-inner">
                    <div class="flashcard-front">
                        <div>
                            <strong>Question :</strong><br><br>
                            Que signifie lim<sub>x‚Üía</sub> f(x) = L ?
                            <br><br>
                            <em style="font-size: 0.9rem;">(Cliquez pour voir la r√©ponse)</em>
                        </div>
                    </div>
                    <div class="flashcard-back">
                        <div>
                            <strong>R√©ponse :</strong><br><br>
                            Cela signifie que lorsque x se rapproche de a,<br>
                            les valeurs de f(x) se rapprochent de L,<br>
                            m√™me si f(a) n'existe pas forc√©ment !
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-nav">
                <button class="btn btn-secondary" disabled>‚Üê Pr√©c√©dent</button>
                <button class="btn btn-primary" onclick="showSection('section2')">Suivant : Nombre d√©riv√© ‚Üí</button>
            </div>
        </section>

        <!-- Section 2 : Nombre d√©riv√© -->
        <section class="section" id="section2">
            <h2>II. Nombre d√©riv√©</h2>

            <h3>1Ô∏è‚É£ Rappel : Coefficient directeur d'une droite</h3>
            
            <div class="info-box">
                Le coefficient directeur (ou pente) d'une droite mesure son inclinaison.<br>
                Il se calcule par : <strong>(variation de y) / (variation de x)</strong>
            </div>

            <div class="formula-box">
                Coefficient directeur = Œîy / Œîx = (y‚ÇÇ - y‚ÇÅ) / (x‚ÇÇ - x‚ÇÅ)
            </div>

            <div class="tip">
                <strong>Exemples du cours :</strong><br>
                ‚Ä¢ Droite (AB) : (5-3)/(4-1) = 2/3<br>
                ‚Ä¢ Droite (CD) : (-1-1)/(6-2) = -2/4 = -1/2
            </div>

            <h3>2Ô∏è‚É£ Fonction d√©rivable</h3>

            <p>Imaginons une courbe et un point A sur cette courbe. Si on trace une droite passant par A et un autre point M de la courbe :</p>

            <div class="definition-box">
                <strong>üéØ La pente de la droite (AM)</strong> est √©gale √† :<br><br>
                <div class="formula-box" style="margin: 1rem 0;">
                    [f(a+h) - f(a)] / h    (avec h ‚â† 0)
                </div>
                <br>
                Quand M se rapproche de A, h tend vers 0, et la droite (AM) se rapproche d'une position limite appel√©e <strong class="highlight">TANGENTE</strong>
            </div>

            <div class="formula-box" style="font-size: 1.6rem; padding: 2.5rem;">
                f'(a) = lim<sub>h‚Üí0</sub> [f(a+h) - f(a)] / h
            </div>

            <div class="info-box">
                <strong>Cette limite s'appelle le NOMBRE D√âRIV√â de f en a</strong><br>
                On le note <strong>f'(a)</strong> (lire "f prime de a")
            </div>

            <h3>üìù Exemple 2 : Calculer le nombre d√©riv√©</h3>

            <p>Soit f(x) = x¬≤ + 2x - 3. Calculons f'(2) :</p>

            <div class="code-block">
<strong>√âtape 1 :</strong> Calculer [f(2+h) - f(2)] / h

f(2+h) = (2+h)¬≤ + 2(2+h) - 3
       = 4 + 4h + h¬≤ + 4 + 2h - 3
       = h¬≤ + 6h + 5

f(2) = 2¬≤ + 2(2) - 3 = 5

[f(2+h) - f(2)] / h = (h¬≤ + 6h + 5 - 5) / h
                     = (h¬≤ + 6h) / h
                     = h(h + 6) / h
                     = h + 6

<strong>√âtape 2 :</strong> Calculer la limite quand h ‚Üí 0

lim<sub>h‚Üí0</sub> (h + 6) = 0 + 6 = 6

<strong>R√©sultat :</strong> f'(2) = 6
            </div>

            <!-- Calculateur de d√©riv√©e -->
            <div class="calculator">
                <h3>üßÆ Calculateur de nombre d√©riv√©</h3>
                <p>Pour f(x) = x¬≤ + 2x - 3</p>
                <div class="calc-inputs">
                    <div class="input-group">
                        <label for="aValue">Calculer f'(a) pour a = :</label>
                        <input type="number" id="aValue" step="0.1" value="2" placeholder="Ex: 2">
                    </div>
                </div>
                <button class="calc-button" onclick="calculateDerivative()">Calculer f'(a)</button>
                <div class="calc-result" id="derivativeResult">
                    Cliquez pour calculer...
                </div>
            </div>

            <!-- Simulateur de tangente -->
            <h3>üéÆ Simulateur interactif de tangente</h3>
            <div class="tangent-simulator">
                <h4 style="margin-bottom: 1.5rem;">Visualisez la tangente en temps r√©el</h4>
                <div class="slider-container">
                    <label for="pointSlider">Position du point sur la courbe (valeur de a) :</label>
                    <input type="range" id="pointSlider" class="slider" min="-3" max="5" step="0.1" value="2">
                    <div class="slider-value">a = <span id="sliderValue">2</span></div>
                </div>
                <canvas id="tangentCanvas" width="600" height="400" style="background: rgba(255,255,255,0.9); margin-top: 1rem;"></canvas>
                <div style="margin-top: 1rem; background: rgba(255,255,255,0.2); padding: 1rem; border-radius: 8px;">
                    <div id="tangentInfo">
                        Point: A(2 ; 5) | D√©riv√©e: f'(2) = 6
                    </div>
                </div>
            </div>

            <!-- Accord√©on pour les exemples d√©taill√©s -->
            <h3>üìñ Exemples d√©taill√©s</h3>
            
            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <span>Exemple complet : Calculer f'(3) pour f(x) = x¬≤ + 2x - 3</span>
                    <span class="accordion-icon">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <div class="accordion-body">
                        <div class="code-block">
<strong>√âtape 1 : Calculer f(3+h)</strong>
f(3+h) = (3+h)¬≤ + 2(3+h) - 3
       = 9 + 6h + h¬≤ + 6 + 2h - 3
       = h¬≤ + 8h + 12

<strong>√âtape 2 : Calculer f(3)</strong>
f(3) = 3¬≤ + 2(3) - 3 = 12

<strong>√âtape 3 : Former le quotient</strong>
[f(3+h) - f(3)] / h = (h¬≤ + 8h + 12 - 12) / h
                     = (h¬≤ + 8h) / h
                     = h(h + 8) / h
                     = h + 8

<strong>√âtape 4 : Prendre la limite</strong>
lim<sub>h‚Üí0</sub> (h + 8) = 8

<strong>Conclusion :</strong> f'(3) = 8
                        </div>
                    </div>
                </div>
            </div>

            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion(this)">
                    <span>Pourquoi divise-t-on par h ?</span>
                    <span class="accordion-icon">‚ñº</span>
                </div>
                <div class="accordion-content">
                    <div class="accordion-body">
                        <p>La division par h est essentielle car elle transforme une <span class="tooltip">diff√©rence<span class="tooltiptext">La variation de la fonction entre deux points</span></span> en un <span class="tooltip">taux de variation<span class="tooltiptext">Combien la fonction change par unit√© de x</span></span>.</p>
                        <p style="margin-top: 1rem;">C'est comme calculer une vitesse : si vous parcourez 100 km en 2 heures, votre vitesse est 100√∑2 = 50 km/h. Ici, h repr√©sente la "distance" entre les deux points sur l'axe des x.</p>
                    </div>
                </div>
            </div>

            <h3>üìê Notations du nombre d√©riv√©</h3>

            <div class="formula-box">
                f'(a)  ou  df/dx(a)  ou  dy/dx(a)  ou  (Œîy/Œîx)‚Çê
            </div>

            <div class="section-nav">
                <button class="btn btn-secondary" onclick="showSection('section1')">‚Üê Limite en z√©ro</button>
                <button class="btn btn-primary" onclick="showSection('section3')">Suivant : Tangente ‚Üí</button>
            </div>
        </section>

        <!-- Section 3 : Tangente -->
        <section class="section" id="section3">
            <h2>III. Tangente √† une courbe</h2>

            <h3>üé® 1) D√©finition</h3>

            <div class="definition-box">
                <strong>Tangente √† une courbe</strong><br><br>
                Une tangente √† une courbe est une droite qui "touche" la courbe en un point.<br>
                C'est la position limite des droites s√©cantes quand deux points se rapprochent.
            </div>

            <h3>üìä 2) Coefficient directeur de la tangente</h3>

            <div class="info-box">
                <strong>Propri√©t√© fondamentale :</strong><br><br>
                La tangente √† la courbe au point A d'abscisse a est la droite :<br>
                ‚Ä¢ passant par A<br>
                ‚Ä¢ de coefficient directeur <span class="highlight">f'(a)</span> (le nombre d√©riv√©)
            </div>

            <div class="formula-box">
                Coefficient directeur de la tangente = f'(a)
            </div>

            <!-- Section formules essentielles -->
            <h3>üìö Formules essentielles √† retenir</h3>
            <div class="formulas-grid">
                <div class="formula-card">
                    <h4>Nombre d√©riv√©</h4>
                    <div class="formula">f'(a) = lim<sub>h‚Üí0</sub> [f(a+h)-f(a)]/h</div>
                    <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">
                        Mesure la pente de la tangente
                    </p>
                </div>
                <div class="formula-card">
                    <h4>√âquation de tangente</h4>
                    <div class="formula">y = f'(a)(x-a) + f(a)</div>
                    <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">
                        Droite passant par A(a, f(a))
                    </p>
                </div>
                <div class="formula-card">
                    <h4>Coefficient directeur</h4>
                    <div class="formula">m = (y‚ÇÇ-y‚ÇÅ)/(x‚ÇÇ-x‚ÇÅ)</div>
                    <p style="font-size: 0.9rem; color: #666; margin-top: 0.5rem;">
                        Pente d'une droite
                    </p>
                </div>
            </div>

            <h3>üìù Exemple 3 : Coefficient directeur</h3>

            <p>Pour f(x) = x¬≤ + 2x - 3, d√©terminons le coefficient directeur de la tangente au point d'abscisse 2 :</p>

            <div class="code-block">
On a calcul√© que f'(2) = 6

<strong>Donc :</strong> La tangente √† la courbe au point A d'abscisse 2
a un coefficient directeur √©gal √† <span class="highlight">6</span>
            </div>

            <div class="tip">
                Pour tracer la tangente :<br>
                1. Placer le point A(2 ; f(2)) = A(2 ; 5)<br>
                2. √Ä partir de A, avancer de 1 vers la droite<br>
                3. Monter de 6 (car coefficient = 6)<br>
                4. Tracer la droite !
            </div>

            <h3>‚úçÔ∏è 2) √âquation de la tangente</h3>

            <div class="formula-box" style="font-size: 1.5rem;">
                y = f'(a)(x - a) + f(a)
            </div>

            <div class="definition-box">
                <strong>üí´ Formule de l'√©quation de la tangente</strong><br><br>
                L'√©quation de la tangente √† la courbe C<sub>f</sub> au point A d'abscisse a est :<br>
                <strong>y = f'(a)(x - a) + f(a)</strong>
            </div>

            <h3>üìù Exemple 4 : √âquation de la tangente</h3>

            <p>Pour f(x) = x¬≤ + 2x - 3 au point d'abscisse 2 :</p>

            <div class="code-block">
<strong>Donn√©es :</strong>
‚Ä¢ f'(2) = 6
‚Ä¢ f(2) = 2¬≤ + 2√ó2 - 3 = 5

<strong>Calcul :</strong>
y = f'(2)(x - 2) + f(2)
y = 6(x - 2) + 5
y = 6x - 12 + 5
y = 6x - 7

<strong>R√©sultat :</strong> L'√©quation de la tangente est <span class="highlight">y = 6x - 7</span>
            </div>

            <!-- Calculateur d'√©quation de tangente -->
            <div class="calculator">
                <h3>üßÆ Calculateur d'√©quation de tangente</h3>
                <p>Pour f(x) = x¬≤ + 2x - 3</p>
                <div class="calc-inputs">
                    <div class="input-group">
                        <label for="tangentA">Point de tangence (a) :</label>
                        <input type="number" id="tangentA" step="0.1" value="2" placeholder="Ex: 2">
                    </div>
                </div>
                <button class="calc-button" onclick="calculateTangent()">Calculer l'√©quation</button>
                <div class="calc-result" id="tangentResult">
                    Cliquez pour calculer...
                </div>
            </div>

            <div class="tip">
                <strong>Astuce calculatrice :</strong><br>
                ‚Ä¢ TI-83 : 2nde + PGRM (Dessin) ‚Üí 5: Tangente<br>
                ‚Ä¢ Casio 35+ : SHIFT + F4 (Sketch) ‚Üí Tang
            </div>

            <!-- Prise de notes -->
            <h3>üìù Vos notes personnelles</h3>
            <div class="note-taking">
                <h4 style="margin-bottom: 1rem; color: var(--text-dark);">üí° Notez vos observations sur les tangentes :</h4>
                <textarea id="userNotes" placeholder="√âcrivez ici vos notes, astuces, ou questions...

Exemple :
- La tangente touche la courbe en un seul point
- Le nombre d√©riv√© donne l'inclinaison
- ..."></textarea>
                <button class="btn btn-success" onclick="saveNotes()" style="margin-top: 1rem;">üíæ Sauvegarder mes notes</button>
            </div>

            <div class="section-nav">
                <button class="btn btn-secondary" onclick="showSection('section2')">‚Üê Nombre d√©riv√©</button>
                <button class="btn btn-primary" onclick="showSection('section4')">Suivant : Exercices ‚Üí</button>
            </div>
        </section>

        <!-- Section 4 : Exercices -->
        <section class="section" id="section4">
            <h2>üéØ Exercices interactifs</h2>

            <!-- Chronom√®tre -->
            <div style="text-align: center;">
                <h3>‚è±Ô∏è Chronom√®tre d'exercice</h3>
                <div class="timer-display" id="timerDisplay">00:00</div>
                <div class="action-buttons" style="justify-content: center;">
                    <button class="btn btn-success" onclick="startTimer()">‚ñ∂Ô∏è D√©marrer</button>
                    <button class="btn btn-secondary" onclick="pauseTimer()">‚è∏Ô∏è Pause</button>
                    <button class="btn btn-primary" onclick="resetTimer()">üîÑ R√©initialiser</button>
                </div>
            </div>

            <!-- Exercices pratiques -->
            <h3>‚úçÔ∏è Exercice pratique 1</h3>
            <div class="practice-exercise">
                <div class="quiz-question">
                    Calculez le nombre d√©riv√© de f(x) = x¬≤ + 4x - 1 en x = 1
                </div>
                <input type="number" class="exercise-input" id="practice1" placeholder="Entrez votre r√©ponse...">
                <button class="calc-button" onclick="checkPractice(1, 6)">V√©rifier la r√©ponse</button>
                <div class="exercise-feedback" id="feedback1"></div>
            </div>

            <h3>‚úçÔ∏è Exercice pratique 2</h3>
            <div class="practice-exercise">
                <div class="quiz-question">
                    Pour f(x) = x¬≤ + 2x - 3, quelle est l'ordonn√©e √† l'origine de la tangente au point d'abscisse x = 1 ?<br>
                    <small>(Rappel : ordonn√©e √† l'origine = valeur de b dans y = mx + b)</small>
                </div>
                <input type="number" class="exercise-input" id="practice2" placeholder="Entrez votre r√©ponse...">
                <button class="calc-button" onclick="checkPractice(2, -4)">V√©rifier la r√©ponse</button>
                <div class="exercise-feedback" id="feedback2"></div>
            </div>

            <!-- Badges de r√©ussite -->
            <h3>üèÜ Badges de r√©ussite</h3>
            <div class="achievement-badges">
                <div class="badge locked" id="badge1">
                    <span class="badge-icon">üéì</span>
                    <div>
                        <strong>Premier pas</strong><br>
                        <small>Compl√©ter le quiz 1</small>
                    </div>
                </div>
                <div class="badge locked" id="badge2">
                    <span class="badge-icon">üßÆ</span>
                    <div>
                        <strong>Calculateur</strong><br>
                        <small>Effectuer 5 calculs</small>
                    </div>
                </div>
                <div class="badge locked" id="badge3">
                    <span class="badge-icon">üìà</span>
                    <div>
                        <strong>Expert graphique</strong><br>
                        <small>Utiliser le simulateur</small>
                    </div>
                </div>
                <div class="badge locked" id="badge4">
                    <span class="badge-icon">üåü</span>
                    <div>
                        <strong>Ma√Ætre de la d√©riv√©e</strong><br>
                        <small>R√©ussir tous les quiz</small>
                    </div>
                </div>
            </div>

            <h3>Quiz 1 : Limite</h3>
            <div class="quiz-container">
                <div class="quiz-question">
                    Si f(x) se rapproche de 5 quand x se rapproche de 3, alors :
                </div>
                <div class="quiz-options" id="quiz1">
                    <div class="quiz-option" onclick="checkQuiz(1, 'a')">
                        a) f(3) = 5
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(1, 'b')">
                        b) lim<sub>x‚Üí3</sub> f(x) = 5
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(1, 'c')">
                        c) f'(3) = 5
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(1, 'd')">
                        d) f est d√©rivable en 3
                    </div>
                </div>
            </div>

            <h3>Quiz 2 : Nombre d√©riv√©</h3>
            <div class="quiz-container">
                <div class="quiz-question">
                    Le nombre d√©riv√© f'(a) repr√©sente :
                </div>
                <div class="quiz-options" id="quiz2">
                    <div class="quiz-option" onclick="checkQuiz(2, 'a')">
                        a) La valeur de f en a
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(2, 'b')">
                        b) Le coefficient directeur de la tangente en a
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(2, 'c')">
                        c) La limite de f en a
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(2, 'd')">
                        d) L'abscisse du point A
                    </div>
                </div>
            </div>

            <h3>Quiz 3 : √âquation de tangente</h3>
            <div class="quiz-container">
                <div class="quiz-question">
                    Si f'(2) = 3 et f(2) = 5, l'√©quation de la tangente en x=2 est :
                </div>
                <div class="quiz-options" id="quiz3">
                    <div class="quiz-option" onclick="checkQuiz(3, 'a')">
                        a) y = 3x + 5
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(3, 'b')">
                        b) y = 3x - 1
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(3, 'c')">
                        c) y = 5x + 3
                    </div>
                    <div class="quiz-option" onclick="checkQuiz(3, 'd')">
                        d) y = 2x + 5
                    </div>
                </div>
            </div>

            <div class="action-buttons">
                <button class="btn btn-success" onclick="showSection('section1')">üîÑ Revoir le cours</button>
                <button class="btn btn-primary" onclick="window.print()">üñ®Ô∏è Imprimer</button>
            </div>

            <div class="section-nav">
                <button class="btn btn-secondary" onclick="showSection('section3')">‚Üê Tangente</button>
                <button class="btn btn-success" onclick="showSection('section1')">üè† Retour au d√©but</button>
            </div>
        </section>

    </div>

    <script>
        // ============ VARIABLES GLOBALES ============
        let stats = {
            timeSpent: 0,
            quizzesCompleted: 0,
            calculations: 0,
            currentSection: 1
        };

        let timerInterval = null;
        let timerSeconds = 0;
        let timeInterval = null;

        // ============ INITIALISATION ============
        window.onload = function() {
            drawLimitGraph();
            updateTangentSimulator();
            document.getElementById('pointSlider').addEventListener('input', updateTangentSimulator);
            
            // D√©marrer le compteur de temps pass√©
            timeInterval = setInterval(() => {
                stats.timeSpent++;
                document.getElementById('statTime').textContent = Math.floor(stats.timeSpent / 60);
                updateScore();
            }, 1000);

            // Charger les notes sauvegard√©es
            const savedNotes = localStorage.getItem('derivationNotes');
            if (savedNotes) {
                document.getElementById('userNotes').value = savedNotes;
            }
        };

        // ============ NAVIGATION ============
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // Mettre √† jour la timeline
            const sectionNumber = parseInt(sectionId.replace('section', ''));
            stats.currentSection = sectionNumber;
            updateTimeline(sectionNumber);
        }

        function updateTimeline(currentStep) {
            const steps = document.querySelectorAll('.timeline-step');
            const progressBar = document.getElementById('timelineProgress');
            
            steps.forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index < currentStep - 1) {
                    step.classList.add('completed');
                } else if (index === currentStep - 1) {
                    step.classList.add('active');
                }
            });

            const progressWidth = ((currentStep - 1) / (steps.length - 1)) * 100;
            progressBar.style.width = progressWidth + '%';
        }

        // ============ BARRE DE PROGRESSION ============
        window.addEventListener('scroll', () => {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.getElementById('progressBar').style.width = scrolled + '%';
        });

        // ============ GRAPHIQUES ============
        function drawLimitGraph() {
            const canvas = document.getElementById('limitGraph');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            // Effacer le canvas
            ctx.clearRect(0, 0, width, height);

            // Configurer les √©chelles
            const xMin = -2, xMax = 2;
            const yMin = 0, yMax = 4;
            const xScale = width / (xMax - xMin);
            const yScale = height / (yMax - yMin);

            // Dessiner les axes
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            ctx.beginPath();
            // Axe X
            ctx.moveTo(0, height - (-yMin * yScale));
            ctx.lineTo(width, height - (-yMin * yScale));
            // Axe Y
            ctx.moveTo(-xMin * xScale, 0);
            ctx.lineTo(-xMin * xScale, height);
            ctx.stroke();

            // Tracer la fonction f(x) = ((x+1)¬≤ - 1) / x
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;
            ctx.beginPath();
            let firstPoint = true;

            for (let x = xMin; x <= xMax; x += 0.01) {
                if (Math.abs(x) < 0.01) continue; // √âviter x = 0

                const y = (Math.pow(x + 1, 2) - 1) / x;
                const canvasX = (x - xMin) * xScale;
                const canvasY = height - (y - yMin) * yScale;

                if (y >= yMin && y <= yMax) {
                    if (firstPoint) {
                        ctx.moveTo(canvasX, canvasY);
                        firstPoint = false;
                    } else {
                        ctx.lineTo(canvasX, canvasY);
                    }
                }
            }
            ctx.stroke();

            // Marquer la limite en x=0, y=2
            ctx.fillStyle = '#f5576c';
            const limitX = -xMin * xScale;
            const limitY = height - (2 - yMin) * yScale;
            ctx.beginPath();
            ctx.arc(limitX, limitY, 8, 0, 2 * Math.PI);
            ctx.fill();

            // Ligne pointill√©e vers y=2
            ctx.strokeStyle = '#f5576c';
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(0, limitY);
            ctx.lineTo(width, limitY);
            ctx.stroke();
            ctx.setLineDash([]);

            // Ajouter des labels
            ctx.fillStyle = '#333';
            ctx.font = 'bold 14px Arial';
            ctx.fillText('y = 2 (limite)', 10, limitY - 10);
            ctx.fillText('x = 0', limitX + 10, height - 10);
        }

        function animateLimitApproach() {
            let x = -1;
            const canvas = document.getElementById('limitGraph');
            const ctx = canvas.getContext('2d');
            
            const interval = setInterval(() => {
                drawLimitGraph();
                
                // Calculer la position
                const xMin = -2, xMax = 2, yMin = 0, yMax = 4;
                const xScale = canvas.width / (xMax - xMin);
                const yScale = canvas.height / (yMax - yMin);
                
                const y = (Math.pow(x + 1, 2) - 1) / x;
                const canvasX = (x - xMin) * xScale;
                const canvasY = canvas.height - (y - yMin) * yScale;

                // Dessiner le point mobile
                ctx.fillStyle = '#FF6B35';
                ctx.beginPath();
                ctx.arc(canvasX, canvasY, 10, 0, 2 * Math.PI);
                ctx.fill();

                ctx.fillStyle = '#FF6B35';
                ctx.font = 'bold 12px Arial';
                ctx.fillText(`x=${x.toFixed(2)}, y=${y.toFixed(2)}`, canvasX + 15, canvasY - 15);

                x += 0.05;
                if (x > -0.05) {
                    x = 0.05;
                }
                if (x > 1) {
                    clearInterval(interval);
                }
            }, 100);
        }

        // ============ SIMULATEUR DE TANGENTE ============
        function updateTangentSimulator() {
            const a = parseFloat(document.getElementById('pointSlider').value);
            document.getElementById('sliderValue').textContent = a.toFixed(1);

            const canvas = document.getElementById('tangentCanvas');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            // Effacer
            ctx.clearRect(0, 0, width, height);

            // f(x) = x¬≤ + 2x - 3
            // f'(x) = 2x + 2
            const fa = a * a + 2 * a - 3;
            const derivative = 2 * a + 2;

            // √âchelles
            const xMin = -4, xMax = 6, yMin = -5, yMax = 20;
            const xScale = width / (xMax - xMin);
            const yScale = height / (yMax - yMin);

            // Axes
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(0, height - (-yMin * yScale));
            ctx.lineTo(width, height - (-yMin * yScale));
            ctx.moveTo(-xMin * xScale, 0);
            ctx.lineTo(-xMin * xScale, height);
            ctx.stroke();

            // Courbe
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let x = xMin; x <= xMax; x += 0.1) {
                const y = x * x + 2 * x - 3;
                const canvasX = (x - xMin) * xScale;
                const canvasY = height - (y - yMin) * yScale;
                if (x === xMin) ctx.moveTo(canvasX, canvasY);
                else ctx.lineTo(canvasX, canvasY);
            }
            ctx.stroke();

            // Point A
            const canvasA_X = (a - xMin) * xScale;
            const canvasA_Y = height - (fa - yMin) * yScale;
            ctx.fillStyle = '#FF6B35';
            ctx.beginPath();
            ctx.arc(canvasA_X, canvasA_Y, 8, 0, 2 * Math.PI);
            ctx.fill();

            // Tangente
            ctx.strokeStyle = '#f5576c';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let x = xMin; x <= xMax; x += 0.1) {
                const y = derivative * (x - a) + fa;
                const canvasX = (x - xMin) * xScale;
                const canvasY = height - (y - yMin) * yScale;
                if (x === xMin) ctx.moveTo(canvasX, canvasY);
                else ctx.lineTo(canvasX, canvasY);
            }
            ctx.stroke();

            // Mettre √† jour les infos
            document.getElementById('tangentInfo').innerHTML = 
                `Point: A(${a.toFixed(1)} ; ${fa.toFixed(1)}) | D√©riv√©e: f'(${a.toFixed(1)}) = ${derivative.toFixed(1)} | Tangente: y = ${derivative.toFixed(1)}x + ${(-derivative * a + fa).toFixed(1)}`;
        }

        // ============ CALCULATEURS ============
        function calculateLimit() {
            const x = parseFloat(document.getElementById('xValue').value);
            stats.calculations++;
            updateStats();
            checkBadge2();

            if (x === 0) {
                document.getElementById('limitResult').innerHTML = '‚ö†Ô∏è La fonction n\'est pas d√©finie en 0 !';
                return;
            }
            const result = (Math.pow(x + 1, 2) - 1) / x;
            document.getElementById('limitResult').innerHTML = `
                <strong>Pour x = ${x} :</strong><br>
                f(${x}) = ${result.toFixed(4)}<br><br>
                ‚ÑπÔ∏è Observez : plus x est proche de 0, plus f(x) se rapproche de 2 !
            `;
        }

        function calculateDerivative() {
            const a = parseFloat(document.getElementById('aValue').value);
            stats.calculations++;
            updateStats();
            checkBadge2();

            const derivative = 2 * a + 2;
            const fa = Math.pow(a, 2) + 2 * a - 3;
            document.getElementById('derivativeResult').innerHTML = `
                <strong>Pour a = ${a} :</strong><br>
                f'(${a}) = ${derivative}<br>
                f(${a}) = ${fa}<br><br>
                ‚úÖ Le coefficient directeur de la tangente en ${a} est ${derivative}
            `;
        }

        function calculateTangent() {
            const a = parseFloat(document.getElementById('tangentA').value);
            stats.calculations++;
            updateStats();
            checkBadge2();

            const derivative = 2 * a + 2;
            const fa = Math.pow(a, 2) + 2 * a - 3;
            const b = -derivative * a + fa;
            document.getElementById('tangentResult').innerHTML = `
                <strong>Calcul d√©taill√© :</strong><br>
                ‚Ä¢ f'(${a}) = ${derivative}<br>
                ‚Ä¢ f(${a}) = ${fa}<br><br>
                <strong>√âquation de la tangente :</strong><br>
                y = ${derivative}(x - ${a}) + ${fa}<br>
                y = ${derivative}x - ${derivative * a} + ${fa}<br>
                <strong style="font-size: 1.3rem; color: #FFD23F;">y = ${derivative}x ${b >= 0 ? '+' : ''} ${b}</strong>
            `;
        }

        // ============ QUIZ ============
        const quizAnswers = {
            1: 'b',
            2: 'b',
            3: 'b'
        };

        function checkQuiz(quizNum, answer) {
            const options = document.querySelectorAll(`#quiz${quizNum} .quiz-option`);
            options.forEach(option => {
                option.style.pointerEvents = 'none';
            });

            const clickedOption = event.target;
            if (answer === quizAnswers[quizNum]) {
                clickedOption.classList.add('correct');
                stats.quizzesCompleted++;
                updateStats();
                setTimeout(() => {
                    alert('üéâ Bravo ! Bonne r√©ponse !');
                    if (quizNum === 1) unlockBadge('badge1');
                    checkBadge4();
                }, 300);
            } else {
                clickedOption.classList.add('incorrect');
                setTimeout(() => {
                    alert('‚ùå Oups ! R√©essayez ou revoyez le cours.');
                    options.forEach(option => {
                        option.classList.remove('incorrect', 'correct');
                        option.style.pointerEvents = 'auto';
                    });
                }, 300);
            }
        }

        // ============ EXERCICES PRATIQUES ============
        function checkPractice(exerciseNum, correctAnswer) {
            const userAnswer = parseFloat(document.getElementById('practice' + exerciseNum).value);
            const feedback = document.getElementById('feedback' + exerciseNum);

            if (Math.abs(userAnswer - correctAnswer) < 0.01) {
                feedback.innerHTML = '‚úÖ <strong>Excellent !</strong> Votre r√©ponse est correcte !';
                feedback.style.background = 'rgba(6, 214, 160, 0.3)';
                stats.quizzesCompleted++;
                updateStats();
            } else {
                feedback.innerHTML = `‚ùå Pas tout √† fait. La bonne r√©ponse est ${correctAnswer}. R√©essayez !`;
                feedback.style.background = 'rgba(229, 57, 53, 0.3)';
            }
        }

        // ============ CHRONOM√àTRE ============
        function startTimer() {
            if (timerInterval) return;
            timerInterval = setInterval(() => {
                timerSeconds++;
                updateTimerDisplay();
            }, 1000);
        }

        function pauseTimer() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
        }

        function resetTimer() {
            pauseTimer();
            timerSeconds = 0;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timerSeconds / 60);
            const seconds = timerSeconds % 60;
            document.getElementById('timerDisplay').textContent = 
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        // ============ BADGES ============
        function unlockBadge(badgeId) {
            const badge = document.getElementById(badgeId);
            if (badge.classList.contains('locked')) {
                badge.classList.remove('locked');
                badge.classList.add('unlocked');
                setTimeout(() => badge.classList.remove('unlocked'), 500);
            }
        }

        function checkBadge2() {
            if (stats.calculations >= 5) {
                unlockBadge('badge2');
            }
        }

        function checkBadge4() {
            if (stats.quizzesCompleted >= 3) {
                unlockBadge('badge4');
            }
        }

        // D√©bloquer badge 3 quand on utilise le simulateur
        document.getElementById('pointSlider')?.addEventListener('input', function() {
            unlockBadge('badge3');
        });

        // ============ STATISTIQUES ============
        function updateStats() {
            document.getElementById('statQuizzes').textContent = stats.quizzesCompleted;
            document.getElementById('statCalculations').textContent = stats.calculations;
            updateScore();
        }

        function updateScore() {
            const maxScore = 100;
            const score = Math.min(maxScore, 
                stats.quizzesCompleted * 20 + 
                stats.calculations * 5 + 
                Math.floor(stats.timeSpent / 60) * 2
            );
            document.getElementById('statScore').textContent = score + '%';
        }

        // ============ NOTES ============
        function saveNotes() {
            const notes = document.getElementById('userNotes').value;
            localStorage.setItem('derivationNotes', notes);
            alert('üíæ Notes sauvegard√©es avec succ√®s !');
        }

        // ============ ACCORD√âON ============
        function toggleAccordion(header) {
            const accordion = header.parentElement;
            accordion.classList.toggle('active');
        }

        // ============ TH√àME ============
        let darkMode = false;
        document.getElementById('themeToggle').addEventListener('click', () => {
            darkMode = !darkMode;
            if (darkMode) {
                document.body.style.background = '#1a1a2e';
                document.body.style.color = '#f9f7f4';
                document.getElementById('themeToggle').textContent = '‚òÄÔ∏è';
            } else {
                document.body.style.background = '#f9f7f4';
                document.body.style.color = '#2d3142';
                document.getElementById('themeToggle').textContent = 'üåô';
            }
        });

        // ============ PLEIN √âCRAN ============
        document.getElementById('fullscreenBtn').addEventListener('click', () => {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
                document.getElementById('fullscreenBtn').textContent = '‚õ∂';
            } else {
                document.exitFullscreen();
                document.getElementById('fullscreenBtn').textContent = '‚õ∂';
            }
        });

        // Message de bienvenue
        console.log('%c‚ú® Bienvenue dans le cours interactif de D√©rivation ! ‚ú®', 'color: #667eea; font-size: 20px; font-weight: bold;');
        console.log('%cExplorez, calculez, apprenez ! üöÄ', 'color: #764ba2; font-size: 14px;');
    </script>
</body>
</html>